<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1688äº§å“å¯¼å…¥æ’ä»¶æµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: #fafafa;
        }
        .test-section h2 {
            color: #FF6B35;
            margin-top: 0;
        }
        .test-item {
            margin-bottom: 15px;
            padding: 10px;
            background: white;
            border-radius: 4px;
            border-left: 4px solid #FF6B35;
        }
        .test-item h3 {
            margin: 0 0 10px 0;
            color: #333;
        }
        .test-item p {
            margin: 5px 0;
            color: #666;
        }
        .status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
        }
        .status.pending {
            background: #fff3cd;
            color: #856404;
        }
        .test-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .test-link {
            display: block;
            padding: 15px;
            background: #FF6B35;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            text-align: center;
            transition: background-color 0.3s;
        }
        .test-link:hover {
            background: #e55a2b;
        }
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 10px 0;
        }
        .instructions {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            border-radius: 6px;
            padding: 15px;
            margin: 20px 0;
        }
        .instructions h3 {
            margin-top: 0;
            color: #0066cc;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ›’ 1688äº§å“å¯¼å…¥æ’ä»¶æµ‹è¯•é¡µé¢</h1>
        
        <div class="instructions">
            <h3>ğŸ“‹ æµ‹è¯•è¯´æ˜</h3>
            <p>æœ¬é¡µé¢ç”¨äºæµ‹è¯•1688äº§å“å¯¼å…¥Chromeæ’ä»¶çš„å„é¡¹åŠŸèƒ½ã€‚è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œæµ‹è¯•ï¼š</p>
            <ol>
                <li>ç¡®ä¿å·²å®‰è£…å¹¶å¯ç”¨æ’ä»¶</li>
                <li>é…ç½®æ­£ç¡®çš„APIåœ°å€å’Œè®¿é—®ä»¤ç‰Œ</li>
                <li>ç‚¹å‡»ä¸‹æ–¹çš„æµ‹è¯•é“¾æ¥è®¿é—®1688äº§å“é¡µé¢</li>
                <li>åœ¨äº§å“é¡µé¢ä½¿ç”¨æ’ä»¶æå–å’Œä¸Šä¼ åŠŸèƒ½</li>
                <li>è¿”å›æœ¬é¡µé¢æŸ¥çœ‹æµ‹è¯•ç»“æœ</li>
            </ol>
        </div>

        <div class="test-section">
            <h2>ğŸ”§ æ’ä»¶åŠŸèƒ½æµ‹è¯•</h2>
            
            <div class="test-item">
                <h3>1. æ’ä»¶å®‰è£…æ£€æµ‹</h3>
                <p>çŠ¶æ€: <span class="status pending" id="install-status">æ£€æµ‹ä¸­...</span></p>
                <p>æ£€æŸ¥æ’ä»¶æ˜¯å¦æ­£ç¡®å®‰è£…å¹¶å¯ä»¥è®¿é—®</p>
            </div>
            
            <div class="test-item">
                <h3>2. APIé…ç½®æ£€æµ‹</h3>
                <p>çŠ¶æ€: <span class="status pending" id="config-status">æ£€æµ‹ä¸­...</span></p>
                <p>æ£€æŸ¥APIåœ°å€å’Œè®¿é—®ä»¤ç‰Œé…ç½®</p>
            </div>
            
            <div class="test-item">
                <h3>3. æƒé™æ£€æµ‹</h3>
                <p>çŠ¶æ€: <span class="status pending" id="permission-status">æ£€æµ‹ä¸­...</span></p>
                <p>æ£€æŸ¥æ’ä»¶æ‰€éœ€æƒé™æ˜¯å¦å·²æˆäºˆ</p>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸŒ æµ‹è¯•é“¾æ¥</h2>
            <p>ç‚¹å‡»ä»¥ä¸‹é“¾æ¥è®¿é—®1688äº§å“é¡µé¢è¿›è¡ŒåŠŸèƒ½æµ‹è¯•ï¼š</p>
            
            <div class="test-links">
                <a href="https://detail.1688.com/offer/870371058481.html" class="test-link" target="_blank">
                    ğŸ“± ç”µå­äº§å“æµ‹è¯•
                </a>
                <a href="https://detail.1688.com/offer/679472945883.html" class="test-link" target="_blank">
                    ğŸ‘• æœè£…äº§å“æµ‹è¯•
                </a>
                <a href="https://detail.1688.com/offer/123456789012.html" class="test-link" target="_blank">
                    ğŸ  å®¶å±…äº§å“æµ‹è¯•
                </a>
                <a href="https://detail.1688.com/offer/987654321098.html" class="test-link" target="_blank">
                    ğŸ”§ å·¥å…·äº§å“æµ‹è¯•
                </a>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ“Š æµ‹è¯•ç»“æœ</h2>
            
            <div class="test-item">
                <h3>äº§å“ä¿¡æ¯æå–æµ‹è¯•</h3>
                <p>æµ‹è¯•é¡¹ç›®ï¼šæ ‡é¢˜ã€ä»·æ ¼ã€å›¾ç‰‡ã€è§„æ ¼ç­‰ä¿¡æ¯æå–</p>
                <p>çŠ¶æ€: <span class="status pending" id="extract-status">å¾…æµ‹è¯•</span></p>
                <div id="extract-results" class="code-block" style="display: none;"></div>
            </div>
            
            <div class="test-item">
                <h3>äº§å“ä¸Šä¼ æµ‹è¯•</h3>
                <p>æµ‹è¯•é¡¹ç›®ï¼šå°†æå–çš„äº§å“ä¿¡æ¯ä¸Šä¼ åˆ°API</p>
                <p>çŠ¶æ€: <span class="status pending" id="upload-status">å¾…æµ‹è¯•</span></p>
                <div id="upload-results" class="code-block" style="display: none;"></div>
            </div>
            
            <div class="test-item">
                <h3>é”™è¯¯å¤„ç†æµ‹è¯•</h3>
                <p>æµ‹è¯•é¡¹ç›®ï¼šç½‘ç»œé”™è¯¯ã€APIé”™è¯¯ç­‰å¼‚å¸¸æƒ…å†µå¤„ç†</p>
                <p>çŠ¶æ€: <span class="status pending" id="error-status">å¾…æµ‹è¯•</span></p>
                <div id="error-results" class="code-block" style="display: none;"></div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ› è°ƒè¯•ä¿¡æ¯</h2>
            
            <div class="test-item">
                <h3>æµè§ˆå™¨ä¿¡æ¯</h3>
                <div class="code-block">
                    <div>ç”¨æˆ·ä»£ç†: <span id="user-agent"></span></div>
                    <div>æµè§ˆå™¨è¯­è¨€: <span id="browser-lang"></span></div>
                    <div>å±å¹•åˆ†è¾¨ç‡: <span id="screen-resolution"></span></div>
                    <div>å½“å‰æ—¶é—´: <span id="current-time"></span></div>
                </div>
            </div>
            
            <div class="test-item">
                <h3>æ’ä»¶ç‰ˆæœ¬ä¿¡æ¯</h3>
                <div class="code-block">
                    <div>æ’ä»¶ID: <span id="extension-id">æœªæ£€æµ‹åˆ°</span></div>
                    <div>æ’ä»¶ç‰ˆæœ¬: <span id="extension-version">æœªæ£€æµ‹åˆ°</span></div>
                    <div>Manifestç‰ˆæœ¬: <span id="manifest-version">æœªæ£€æµ‹åˆ°</span></div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ“ æµ‹è¯•æ—¥å¿—</h2>
            <div id="test-log" class="code-block" style="min-height: 200px; max-height: 400px; overflow-y: auto;">
                <div>æµ‹è¯•æ—¥å¿—å°†åœ¨è¿™é‡Œæ˜¾ç¤º...</div>
            </div>
            <button onclick="clearLog()" style="margin-top: 10px; padding: 8px 16px; background: #6c757d; color: white; border: none; border-radius: 4px; cursor: pointer;">æ¸…ç©ºæ—¥å¿—</button>
        </div>
    </div>

    <script>
        // æ—¥å¿—åŠŸèƒ½
        function log(message, type = 'info') {
            const logElement = document.getElementById('test-log');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.innerHTML = `[${timestamp}] ${type.toUpperCase()}: ${message}`;
            logEntry.style.color = type === 'error' ? '#dc3545' : type === 'success' ? '#28a745' : '#333';
            logElement.appendChild(logEntry);
            logElement.scrollTop = logElement.scrollHeight;
        }

        function clearLog() {
            document.getElementById('test-log').innerHTML = '<div>æµ‹è¯•æ—¥å¿—å·²æ¸…ç©º...</div>';
        }

        // æ›´æ–°çŠ¶æ€
        function updateStatus(elementId, status, message = '') {
            const element = document.getElementById(elementId);
            element.className = `status ${status}`;
            element.textContent = message || (status === 'success' ? 'é€šè¿‡' : status === 'error' ? 'å¤±è´¥' : 'æ£€æµ‹ä¸­...');
        }

        // åˆå§‹åŒ–é¡µé¢ä¿¡æ¯
        function initPageInfo() {
            document.getElementById('user-agent').textContent = navigator.userAgent;
            document.getElementById('browser-lang').textContent = navigator.language;
            document.getElementById('screen-resolution').textContent = `${screen.width}x${screen.height}`;
            document.getElementById('current-time').textContent = new Date().toLocaleString();
        }

        // æ£€æµ‹æ’ä»¶
        function detectExtension() {
            log('å¼€å§‹æ£€æµ‹æ’ä»¶å®‰è£…çŠ¶æ€...');
            
            // å°è¯•æ£€æµ‹æ’ä»¶æ˜¯å¦å­˜åœ¨
            if (typeof chrome !== 'undefined' && chrome.runtime) {
                try {
                    // è¿™é‡Œå¯ä»¥æ·»åŠ ä¸æ’ä»¶é€šä¿¡çš„ä»£ç 
                    updateStatus('install-status', 'success', 'å·²å®‰è£…');
                    log('æ’ä»¶æ£€æµ‹æˆåŠŸ', 'success');
                } catch (error) {
                    updateStatus('install-status', 'error', 'æ£€æµ‹å¤±è´¥');
                    log(`æ’ä»¶æ£€æµ‹å¤±è´¥: ${error.message}`, 'error');
                }
            } else {
                updateStatus('install-status', 'error', 'æœªå®‰è£…');
                log('æœªæ£€æµ‹åˆ°Chromeæ‰©å±•API', 'error');
            }
        }

        // æ£€æµ‹é…ç½®
        function detectConfig() {
            log('æ£€æµ‹APIé…ç½®...');
            // è¿™é‡Œå¯ä»¥æ·»åŠ é…ç½®æ£€æµ‹é€»è¾‘
            updateStatus('config-status', 'pending', 'éœ€è¦æ‰‹åŠ¨é…ç½®');
        }

        // æ£€æµ‹æƒé™
        function detectPermissions() {
            log('æ£€æµ‹æ’ä»¶æƒé™...');
            // è¿™é‡Œå¯ä»¥æ·»åŠ æƒé™æ£€æµ‹é€»è¾‘
            updateStatus('permission-status', 'pending', 'éœ€è¦æ‰‹åŠ¨æ£€æŸ¥');
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            log('æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
            initPageInfo();
            detectExtension();
            detectConfig();
            detectPermissions();
        });

        // ç›‘å¬æ¥è‡ªæ’ä»¶çš„æ¶ˆæ¯
        window.addEventListener('message', function(event) {
            if (event.data && event.data.type === 'VS_TEST_RESULT') {
                log(`æ”¶åˆ°æ’ä»¶æµ‹è¯•ç»“æœ: ${JSON.stringify(event.data)}`, 'info');
                
                // æ›´æ–°æµ‹è¯•ç»“æœ
                if (event.data.test === 'extract') {
                    updateStatus('extract-status', event.data.success ? 'success' : 'error');
                    document.getElementById('extract-results').textContent = JSON.stringify(event.data.data, null, 2);
                    document.getElementById('extract-results').style.display = 'block';
                } else if (event.data.test === 'upload') {
                    updateStatus('upload-status', event.data.success ? 'success' : 'error');
                    document.getElementById('upload-results').textContent = JSON.stringify(event.data.data, null, 2);
                    document.getElementById('upload-results').style.display = 'block';
                }
            }
        });
    </script>
</body>
</html>